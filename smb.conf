[global]
workgroup = WORKGROUP          # Defina o nome do seu workgroup aqui
server string = Servidor Samba
netbios name = SAMBA    # Defina um nome NetBIOS para seu servidor
security = user                # Força a autenticação por usuário

# Desabilita acesso guest/anônimo
map to guest = never

# Configurações de permissão para novos arquivos e diretórios
create mask = 0660             # Arquivos criados terão permissão rw-rw---- (RW para dono e grupo)
directory mask = 0770          # Diretórios criados terão permissão rwxrwx--- (RWX para dono e grupo)
force create mode = 0660       # Garante a permissão de arquivo especificada
force directory mode = 0770    # Garante a permissão de diretório especificada

# Configuração para usershares (compartilhamentos criados por usuários)
usershare path = /var/lib/samba/usershares # Diretório onde os usershares serão armazenados
usershare max shares = 100     # Limite máximo de usershares
usershare allow guests = no    # Impede que usershares permitam acesso guest
usershare group = users        # Grupo que pode criar usershares (verifique/ajuste conforme sua distro)

# Configurações do VFS para melhor interoperabilidade e suporte a usershares
vfs objects = fruit
fruit:metadata = netatalk
fruit:model = MacSrv
fruit:posixacl = yes
fruit:locking = netatalk
fruit:encoding = native

# Outras configurações comuns e recomendadas
dns proxy = no
log file = /var/log/samba/log.%m
max log size = 10
syslog = 0
panic action = /usr/share/samba/panic-action %d
server role = standalone server
passdb backend = tdbsam

# As configurações abaixo garantem que nenhum compartilhamento padrão seja carregado ao iniciar o serviço
# [homes] e [printers] estão desabilitados por padrão.
# Certifique-se de que não há outras seções de compartilhamento ([share_name]) definidas abaixo de [global].

#[homes]
#   comment = Home Directories
#   browseable = no
#   read only = yes
#   create mask = 0700
#   directory mask = 0700
#   valid users = %S

#[printers]
#   comment = All Printers
#   browseable = no
#   printable = yes
#   path = /var/spool/samba
#   #guest ok = no       # Já definido globalmente como never
#   #read only = yes     # Impressoras geralmente não precisam de escrita direta
#   create mask = 0700